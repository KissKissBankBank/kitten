/// Slider
///
/// @group 0000_form
///
///                       ,--> handle icon
/// ===================[  â€¢  ]----------------------------
///       `--> progress     `--> handle          `--> ramp
///
///
/// In JavaScript you should move the progress's `width` and the handle's `left`
/// from 0 to 100%.
///
/// @example scss - usage
///
///   $slider: (
///     color: red
///   );
///   @include k-Slider($slider);
///
/// @example html
///
///   <div class="k-Slider">
///     <div class="k-Slider__ramp">
///       <div class="k-Slider__progress"></div>
///       <div class="k-Slider__handle">
///         <svg class="k-Slider__handle__icon"></svg>
///       </div>
///     </div>
///   </div>
@mixin k-Slider($slider) {
  $progress-color: map-get($slider, 'color');
  $ramp-color: #eee;
  $handle-color: #aaa;

  $ramp-height: .2rem;
  $handle-size: 2.5rem;
  $transition-speed: .2s;
  $handle-icon-size: .6rem;

  .k-Slider {
    padding: ($handle-size / 2);

    // a click anywhere on the slider should move it around
    cursor: pointer;

    &.is-grabbing {
      // cursor defined here in rather than on the handle, in case the cursor
      // moves further than the handle
      cursor: -webkit-grabbing;
      cursor: grabbing;
    }
  }

  .k-Slider__ramp {
    position: relative;
    height: $ramp-height;

    background: $ramp-color;

    &:before,
    &:after {
      position: absolute;
      top: 0;
      display: block;
      width: ($handle-size / 2);
      height: 100%;
      content: '';
    }

    &:before {
      left: -($handle-size / 2);
      background: $progress-color;
    }
    &:after {
      right: -($handle-size / 2);
      background: $ramp-color;
    }
  }

  .k-Slider__progress {
    width: 0; // moved by JS from 0 to 100%
    height: 100%;

    background: $progress-color;

    transition: width $transition-speed;

    .k-Slider.is-grabbing & {
      // when we are moving by hand, do not slow down the "width" movement
      transition: none;
    }
  }

  .k-Slider__handle {
    z-index: 1; // go over ramp's :after
    position: absolute;
    left: 0; // moved by JS from 0 to 100%
    top: -($handle-size / 2);

    // to align the icon in its center
    align-items: center;
    justify-content: center;
    display: flex;

    height: $handle-size;
    width: $handle-size;
    margin-left: -($handle-size / 2);

    outline: 0; // hide default outline in favor of our hand-made focus style
    border: 1px solid #eee;
    border-radius: 50%;
    background: white;
    box-shadow: 0 .1rem .2rem rgba(0, 0, 0, .2);

    cursor: -webkit-grab;
    cursor: grab;
    transition: left $transition-speed,
                box-shadow $transition-speed;

    &:focus {
      box-shadow: 0 .1rem .7rem rgba(0, 0, 0, .7);
    }

    .k-Slider.is-grabbing & {
      cursor: inherit;

      // when we are moving by hand, do not slow down the "left" movement
      transition: box-shadow $transition-speed;
    }
  }

  .k-Slider__handle__icon {
    width: $handle-icon-size;

    fill: $handle-color;
  }
}
